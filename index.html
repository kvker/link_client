<!DOCTYPE html>
<html lang="zh_CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>林克</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/picnic.min.css">
  <link rel="stylesheet" href="css/index.css">
</head>

<body>
  <div id="loading_page">
    检查登录中...
  </div>

  <login-page id="login_page"></login-page>
  <main-page id="main_page"></main-page>

  <div class="modal">
    <input id="modal" type="checkbox" />
    <label for="modal" class="overlay"></label>
    <article>
      <header>
        <h3 id="modal_title"></h3>
        <label for="modal" class="close">&times;</label>
      </header>
      <section class="content" id="modal_content"></section>
      <footer>
        <label for="modal" class="button">确定</label>
      </footer>
    </article>
  </div>

  <template id="login_temp">
    <link rel="stylesheet" href="css/picnic.min.css">
    <style>
      /* 组件全局样式 */
      :host {}

      #login_page>* {
        margin: 8px 0;
      }
    </style>

    <div id="login_page" class="half">
      <h1>林克</h1>
      <input id="username_input" type="text" placeholder="用户名" value="kk">
      <input id="password_input" type="password" placeholder="密码, 不少于6位" value="aa123456">
      <button id="login_btn" class="full">登录</button>
      <button id="regist_btn" class="full">注册</button>
    </div>

    <div class="modal">
      <input id="modal" type="checkbox" />
      <label for="modal" class="overlay"></label>
      <article>
        <header>
          <h3 id="modal_title">提示</h3>
          <label for="modal" class="close">&times;</label>
        </header>
        <section class="content" id="modal_content">提示</section>
        <footer>
          <button class="button" id="modal_confirm">确定</button>
          <label for="modal" class="button dangerous">
            取消
          </label>
        </footer>
      </article>
    </div>
  </template>

  <template id="main_temp">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/picnic.min.css">
    <style>
      :host {
        width: 100%;
        height: 100vh;
        font-size: 14px;
      }

      nav {
        position: sticky;
      }

      .modal .content .half {
        margin: 8px;
      }

      table {
        width: 100%;
      }
    </style>
    <nav>
      <a href="#" class="brand" id="username"></a>
      <label for="modal_checkbox_add" class="button">新增</label>
      <button id="logout_btn" class="warning">退出</button>
      <button id="pre_btn" class="small_btn" style="margin-left: 80px;">pre</button>
      <button id="next_btn" class="small_btn">next</button>
      <span id="page_span" style="margin-left: 100px;"></span>
      <div class="menu">
        <input id="search_input" placeholder="搜索" />
      </div>
    </nav>

    <table>
      <thead>
        <tr>
          <th>姓名</th>
          <th>号码</th>
          <th>职业</th>
          <th>备注</th>
        </tr>
      </thead>
      <tbody id="tbody">
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>

    <div class="modal">
      <input id="modal_checkbox_add" type="checkbox" />
      <label for="modal_checkbox_add" class="overlay"></label>
      <article>
        <header>
          <h3>新增</h3>
          <label for="modal_checkbox_add" class="close">&times;</label>
        </header>
        <section class="content flex one center">
          <input id="add_username" class="half" type="text" placeholder="姓名">
          <input id="add_phone" class="half center" type="text" placeholder="号码">
          <input id="add_profession" class="half" type="text" placeholder="职业">
          <input id="add_remind" class="half" type="text" placeholder="备注">
        </section>
        <footer>
          <a id="add_confirm" class="button" href="#">确定</a>
          <label for="modal_checkbox_add" class="button dangerous">取消</label>
        </footer>
      </article>
    </div>
  </template>

  <!-- 内部引入, 否则会走nodejs模式, 导致无法调试 -->
  <script src="js/libs/av.min.js"></script>
  <script src="js/libs/blueimp.min.js"></script>
  <script src="js/libs/dayjs.min.js"></script>
  <script type="module" src="index.js"></script>
  <script type="module">
    import util from './js/util.js'

    if(AV.User.current()) {
      util.route.main()
    } else {
      util.route.login()
    }
  </script>
</body>

</html>