{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../src/pages/login/index.svelte",
    "../../src/pages/main/index.svelte",
    "../../src/components/loading/index.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { push, pop, replace } from \"svelte-spa-router\";\n  import Loading from \"../../components/loading/index.svelte\";\n  import av from \"../../utils/av.js\";\n\n  // 表单字段\n  let username = \"\";\n  let password = \"\";\n\n  // md5加密密码\n  let md5_password = \"\";\n\n  let loading_show = false;\n  $: {\n    md5_password = md5(password);\n  }\n\n  async function login() {\n    loading_show = true;\n    try {\n      // 登录\n      await av.login({\n        username,\n        password: md5_password\n      });\n      push(\"/main\");\n    } catch (error) {\n      console.log(Object.keys(error));\n      alert(error.rawMessage);\n    }\n    loading_show = false;\n  }\n\n  /**\n   * 检测注册数据\n   */\n  function checkRegist() {\n    if (!username || !password) {\n      alert(`请输入账密`);\n      return;\n    } else if (password.length < 6) {\n      alert(`密码不少于6位`);\n      return;\n    }\n    if (confirm(`注册账密为: ${username}, ${password}, 请确认`)) {\n      regist();\n    }\n  }\n\n  /**\n   * 注册\n   */\n  async function regist() {\n    loading_show = true;\n    try {\n      // 注册\n      await av.regist({\n        username,\n        password: md5_password\n      });\n      push(\"/main\");\n    } catch (error) {\n      console.log(error);\n      alert(error.rawMessage);\n    }\n    loading_show = false;\n  }\n</script>\n\n<style>\n  #login_page {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    margin: 0 auto;\n  }\n  #login_page > * {\n    margin: 8px 0;\n  }\n</style>\n\n<div id=\"login_page\" class=\"half\">\n  <h1>林克</h1>\n  <!-- username, password -->\n  <input bind:value={username} type=\"text\" placeholder=\"用户名\" value=\"kk\" />\n  <input\n    bind:value={password}\n    type=\"password\"\n    placeholder=\"密码, 不少于6位\"\n    value=\"aa123456\" />\n  <button class=\"full\" on:click={login}>登录</button>\n  <button class=\"full\" on:click={checkRegist}>注册</button>\n</div>\n\n<Loading bind:show={loading_show} />\n",
    "<script>\n  import { push, pop, replace } from \"svelte-spa-router\";\n  import Loading from \"../../components/loading/index.svelte\";\n  import av from \"../../utils/av.js\";\n\n  let user = AV.User.current();\n  if (!user) {\n    replace(\"/\");\n  }\n  let loading_show = false;\n  // 条目统计\n  let list = [];\n  let list_count_content = \"\";\n\n  // 表单显示控制\n  let checked = false;\n  // 是否为编辑\n  let is_edit = false;\n  // 当前编辑的objectId\n  let edit_id = \"\";\n  // 搜索框实例\n  let seach_input;\n\n  // 表单字段\n  let username;\n  let phone;\n  let profession;\n  let remind;\n\n  getList();\n\n  /**\n   * 获取列表\n   * @param {number} page 页码\n   */\n  async function getList(search_value = \"\") {\n    loading_show = true;\n    try {\n      list = (await av.read(\"Contact\", q => {\n        q.equalTo(\"user\", user);\n        if (search_value) {\n          q.contains(\"username\", search_value);\n        }\n        q.limit(1000);\n      })).sort((a, b) =>\n        a.get(\"username\").localeCompare(b.get(\"username\"), \"zh-Hans-CN\", {\n          sensitivity: \"accent\"\n        })\n      );\n      list_count_content = `共${list.length}条`;\n    } catch (error) {\n      alert(error.rawMessage || error.message);\n    }\n    loading_show = false;\n  }\n\n  /**\n   * 搜索框变动监听\n   */\n  function changeSearchInput(e) {\n    if (e.keyCode === 13) {\n      // 回车\n      getList(e.target.value);\n    }\n  }\n\n  /**\n   * 表单确认\n   */\n  async function confirmForm() {\n    if (!username || !phone || !profession || !remind) {\n      alert(\"请输入全部内容\");\n      return;\n    }\n    // this.toggleModal(\"#modal_add\");\n    const body = {\n      username: username,\n      phone: phone,\n      profession: profession,\n      remind: remind,\n      user\n    };\n    loading_show = true;\n    try {\n      if (is_edit) {\n        // 编辑\n        await av.update(\"Contact\", edit_id, body);\n        checked = false;\n        alert(\"更新成功\");\n        getList();\n      } else {\n        // 新增\n        await av.create(\"Contact\", body);\n        checked = false;\n        alert(\"新增成功\");\n        getList();\n      }\n      updateForm();\n    } catch (error) {\n      alert(error.rawMessage || error.message);\n    }\n    loading_show = false;\n  }\n\n  /**\n   * 更新表单\n   */\n  function updateForm(json = {}) {\n    username = json.username || \"\";\n    phone = json.phone || \"\";\n    profession = json.profession || \"\";\n    remind = json.remind || \"\";\n  }\n\n  function logout() {\n    AV.User.logOut();\n    replace(\"/\");\n  }\n\n  /**\n   * 点击新增\n   */\n  function add(item, idx) {\n    checked = true;\n    is_edit = false;\n    updateForm();\n  }\n\n  /**\n   * 点击编辑\n   */\n  function edit(item, idx) {\n    checked = true;\n    is_edit = true;\n    edit_id = item.id;\n    updateForm(item.toJSON());\n  }\n\n  /**\n   * 点击删除\n   */\n  async function del(item, idx) {\n    if (confirm(\"确认删除吗?\")) {\n      loading_show = true;\n      try {\n        await av.delete(\"Contact\", item.id);\n        checked = false;\n        list.splice(idx, 1);\n        list = list;\n      } catch (error) {\n        alert(error.rawMessage || error.message);\n      }\n      loading_show = false;\n    }\n  }\n</script>\n\n<style>\n  nav {\n    position: sticky;\n    width: 100%;\n  }\n\n  .modal .content .half {\n    margin: 8px;\n  }\n\n  table {\n    width: 100%;\n  }\n\n  .error {\n    margin-left: 16px;\n  }\n</style>\n\n<nav>\n  <button class=\"button\" on:click={e => add()}>新增</button>\n  <button class=\"warning\" on:click={logout}>退出</button>\n  <span class=\"list_count_content\" style=\"margin-left: 100px;\">\n    {list_count_content}\n  </span>\n  <div class=\"menu\">\n    <input\n      placeholder=\"搜索\"\n      on:keypress={changeSearchInput}\n      bind:this={seach_input} />\n  </div>\n</nav>\n\n<table>\n  <thead>\n    <tr>\n      <th>姓名</th>\n      <th>号码</th>\n      <th>职业</th>\n      <th>备注</th>\n      <th>操作</th>\n    </tr>\n  </thead>\n  <tbody id=\"tbody\">\n    {#each list as item, idx (idx)}\n      <tr>\n        <td>{item.get('username')}</td>\n        <td>{item.get('phone')}</td>\n        <td>{item.get('profession')}</td>\n        <td>{item.get('remind')}</td>\n        <td>\n          <button class=\"small_btn\" on:click={e => edit(item, idx)}>\n            编辑\n          </button>\n          <button class=\"small_btn error\" on:click={e => del(item, idx)}>\n            删除\n          </button>\n        </td>\n      </tr>\n    {/each}\n  </tbody>\n</table>\n\n<div class=\"modal\">\n  <input id=\"modal_add\" type=\"checkbox\" bind:checked />\n  <label for=\"modal_add\" class=\"overlay\" />\n  <article>\n    <header>\n      <h3>{is_edit ? '编辑' : '新增'}</h3>\n      <label for=\"modal_add\" class=\"close\">&times;</label>\n    </header>\n    <section class=\"content flex one center\">\n      <input\n        bind:value={username}\n        class=\"half\"\n        type=\"text\"\n        placeholder=\"姓名\" />\n      <input\n        bind:value={phone}\n        class=\"half center\"\n        type=\"text\"\n        placeholder=\"号码\" />\n      <input\n        bind:value={profession}\n        class=\"half\"\n        type=\"text\"\n        placeholder=\"职业\" />\n      <input bind:value={remind} class=\"half\" type=\"text\" placeholder=\"备注\" />\n    </section>\n    <footer>\n      <label class=\"button\" on:click={confirmForm}>确定</label>\n      <label for=\"modal_add\" class=\"button dangerous\">取消</label>\n    </footer>\n  </article>\n</div>\n\n<Loading bind:show={loading_show} />\n",
    "<script>\n  export let show = false;\n</script>\n\n<style>\n  #loading {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100vh;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n    background: #0003;\n  }\n\n  .spinner {\n    animation: rotator 1.4s linear infinite;\n  }\n\n  @keyframes rotator {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(270deg);\n    }\n  }\n\n  .path {\n    stroke-dasharray: 187;\n    stroke-dashoffset: 0;\n    transform-origin: center;\n    animation: dash 1.4s ease-in-out infinite,\n      colors (1.4s * 4) ease-in-out infinite;\n  }\n\n  @keyframes colors {\n    0% {\n      stroke: #4285f4;\n    }\n    25% {\n      stroke: #de3e35;\n    }\n    50% {\n      stroke: #f7c223;\n    }\n    75% {\n      stroke: #1b9a59;\n    }\n    100% {\n      stroke: #4285f4;\n    }\n  }\n\n  @keyframes dash {\n    0% {\n      stroke-dashoffset: 187;\n    }\n    50% {\n      stroke-dashoffset: 187/4;\n      transform: rotate(135deg);\n    }\n    100% {\n      stroke-dashoffset: 187;\n      transform: rotate(450deg);\n    }\n  }\n</style>\n\n<div id=\"loading\" style=\"display: {show ? 'flex' : 'none'};\">\n  <svg\n    class=\"spinner\"\n    width=\"65px\"\n    height=\"65px\"\n    viewBox=\"0 0 66 66\"\n    xmlns=\"http://www.w3.org/2000/svg\">\n    <circle\n      class=\"path\"\n      fill=\"none\"\n      stroke-width=\"6\"\n      stroke-linecap=\"round\"\n      cx=\"33\"\n      cy=\"33\"\n      r=\"30\" />\n  </svg>\n</div>\n"
  ],
  "names": [],
  "mappings": "AAsEE,WAAW,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,KAAK,CACb,MAAM,CAAE,CAAC,CAAC,IAAI,AAChB,CAAC,AACD,yBAAW,CAAG,cAAE,CAAC,AACf,MAAM,CAAE,GAAG,CAAC,CAAC,AACf,CAAC;AC8ED,GAAG,eAAC,CAAC,AACH,QAAQ,CAAE,MAAM,CAChB,KAAK,CAAE,IAAI,AACb,CAAC,AAED,qBAAM,CAAC,QAAQ,CAAC,KAAK,eAAC,CAAC,AACrB,MAAM,CAAE,GAAG,AACb,CAAC,AAED,KAAK,eAAC,CAAC,AACL,KAAK,CAAE,IAAI,AACb,CAAC,AAED,MAAM,eAAC,CAAC,AACN,WAAW,CAAE,IAAI,AACnB,CAAC;ACxKD,QAAQ,cAAC,CAAC,AACR,QAAQ,CAAE,KAAK,CACf,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,KAAK,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,GAAG,CACZ,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,QAAQ,cAAC,CAAC,AACR,SAAS,CAAE,qBAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,AACzC,CAAC,AAED,WAAW,qBAAQ,CAAC,AAClB,EAAE,AAAC,CAAC,AACF,SAAS,CAAE,OAAO,IAAI,CAAC,AACzB,CAAC,AACD,IAAI,AAAC,CAAC,AACJ,SAAS,CAAE,OAAO,MAAM,CAAC,AAC3B,CAAC,AACH,CAAC,AAED,KAAK,cAAC,CAAC,AACL,gBAAgB,CAAE,GAAG,CACrB,iBAAiB,CAAE,CAAC,CACpB,gBAAgB,CAAE,MAAM,CACxB,SAAS,CAAE,kBAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;MACxC,oBAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,QAAQ,AAC1C,CAAC,AAED,WAAW,oBAAO,CAAC,AACjB,EAAE,AAAC,CAAC,AACF,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,GAAG,AAAC,CAAC,AACH,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,GAAG,AAAC,CAAC,AACH,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,GAAG,AAAC,CAAC,AACH,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,IAAI,AAAC,CAAC,AACJ,MAAM,CAAE,OAAO,AACjB,CAAC,AACH,CAAC,AAED,WAAW,kBAAK,CAAC,AACf,EAAE,AAAC,CAAC,AACF,iBAAiB,CAAE,GAAG,AACxB,CAAC,AACD,GAAG,AAAC,CAAC,AACH,iBAAiB,CAAE,GAAG,CAAC,CAAC,CACxB,SAAS,CAAE,OAAO,MAAM,CAAC,AAC3B,CAAC,AACD,IAAI,AAAC,CAAC,AACJ,iBAAiB,CAAE,GAAG,CACtB,SAAS,CAAE,OAAO,MAAM,CAAC,AAC3B,CAAC,AACH,CAAC"
}